
<div class="col-md-2 portlet light portlet-fit bordered" style="padding: 5px;">
	<div class="mt-element-list">
		<div class="mt-list-head list-simple ext-1 font-white bg-blue-chambray">
			<div class="list-head-title-container">
				<a href="javascript:;" class="font-white pull-right">
					<i class="fa fa-refresh"></i>
				</a>
				<h3 class="list-title">Database</h3>
			</div>
		</div>
		<div class="mt-list-container list-simple ext-1 group" id="db-help">

			<a class="list-toggle-container" data-toggle="collapse"   data-target="#lstDBtbl" aria-expanded="true">
				<div id="db-help1" class="list-toggle"> {{database}}
					<span id="db-help2" class="badge badge-default pull-right bg-white font-green bold">{{datatableLength}}</span>
				</div>
			</a>
			<div style="overflow: auto; max-height: 600px" aria-expanded="true" class="panel-collapse collapse in" id="lstDBtbl">
				<label style="width:100%;">
					<input id="db-help3" ng-model="searchText" class="form-control" placeholder="Search"></input>
				</label>
				
				<div id="tree_4" class="jstree jstree-4 jstree-default" role="tree" aria-multiselectable="true" tabindex="0"  aria-busy="false">

					<ul class="jstree-container-ul" role="group">
					   <div id="db-db" style="margin-left:-24px;">
						<li role="treeitem"
						     ng-repeat="dblist in databaseList " 
						     ng-click="OnDBClick(dblist)"
							 aria-selected="false" aria-level="0" aria-labelledby="node_148636173992511_anchor" aria-expanded="false" id="{{dblist}}" class="jstree-node jstree-closed ">
							<i class="jstree-icon jstree-ocl" role="presentation"></i>
							<a class="jstree-anchor" href="#" tabindex="-1" id="node_148636173992511_anchor">
								<i class="jstree-icon jstree-themeicon fa fa-database icon-lg icon-state-success jstree-themeicon-custom" role="presentation"></i>
								{{dblist}}
							</a>
						</li>
						</div>
						<li role="treeitem"
							 aria-selected="false" aria-level="1" aria-labelledby="{{dblist}}" aria-expanded="false" id="acive-db" class="jstree-node jstree-open" aria-busy="false">
							<i class="jstree-icon jstree-ocl" role="presentation"></i>
							<a class="jstree-anchor jstree-clicked" href="#" tabindex="1" id="node_148636173992511_anchor">
								<i class="jstree-icon jstree-themeicon fa fa-database icon-lg icon-state-success jstree-themeicon-custom" role="presentation"></i>
								{{database}}
							</a>
							<ul class="jstree-container-ul jstree-children" role="group">
								<li role="treeitem"
								     ng-repeat="dbtbllist in datatableList | filter:searchText" 
									 aria-selected="false" aria-level="1" aria-labelledby="node_148636173992511_anchor" aria-expanded="false" id="{{dbtbllist}}" class="jstree-node jstree-closed" aria-busy="false">
									<i class="jstree-icon jstree-ocl" role="presentation"></i>
									<a class="jstree-anchor" href="#" tabindex="-1" id="node_148636173992511_anchor">
										<i class="jstree-icon jstree-themeicon fa fa-table icon-lg icon-state-success jstree-themeicon-custom" role="presentation"></i>
										{{dbtbllist}}
									</a>
								</li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</div>
		
		<!--<div id="jstree_Col">			
		</div>-->
	</div>	
</div>
<div class="col-md-10" style="padding: 0;">
	<div class="col-md-12 sql_editor">
		<section>
			<div id="qryeditor" ng-model='editorarea' ui-ace="{
          mode : 'sql',
          theme:'chrome',
          onLoad: aceLoaded,
          onChange: aceChanged
        }"></div>
		</section>
		<div class="action" style="float:right; margin:5px 0px;">
			<button class="btn btn-sm" ng-click="CallMe()"><i class="fa fa-question-circle"></i> Help</button> 
			<div  class="btn-group"  >
			<!-- ng-disabled="Saveqry" -->
                <button id="save"  type="button" class="btn yellow dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> Save
                    <i class="fa fa-angle-down"></i>
                </button>
                <ul class="dropdown-menu" role="menu" aria-labelledby="btnGroupVerticalDrop5">
                    <li>
                        <a ng-click="saveQuery()"> Save in SQL editor </a>
                    </li>
                    <li>
                        <a ng-click="saveEReport()"> Save in E-Reporting</a>
                    </li>
                </ul>
            </div>
			<!-- <button      class="btn btn-sm btn-warning saveqry" data-loading-text="Saving Your Query Please Wait..."> Save </button> -->
			<button id="report"   class="btn btn-sm btn-info report" ng-disabled="btnReport" data-loading-text="Saving Your Query Please Wait..."> Report </button>
			<button id= "exec"    class="btn btn-sm btn-success exec" ng-disabled="btnExec" data-loading-text="Executing Your Query Please Wait..."> Execute </button>
			<button id= "explain" class="btn btn-sm btn-primary explain" ng-disabled="btnExec" data-loading-text="Please Wait..."> Explain </button>
			<!-- <button class="btn btn-sm btn-primary saveas {{editorarea.length > 0 ? '' : 'disabled'}}"> Save As </button>  -->
			<button id="new" class="btn btn-sm btn-default newqry"> New Query </button>

		</div>
		              <div ng-intro-options="IntroOptions" ng-intro-method="CallMe"
              ng-intro-autostart="ShouldAutoStart"></div>
	</div>
	<div class="col-md-12 result_container">
		<div class="profile-content">
			<div class="row">
				<div class="col-md-12">
					<div class="portlet light ">
						<div class="portlet-body">
							<ul class="nav nav-tabs">
								<li class="tab" id='tabResult' data="tab_Result" ng-show="showResults">
									<a data-toggle="tab" href="#tab_Result" aria-expanded="expanded"> Results </a>
								</li>
								<li class="tab " id='tabHistory' data="tab_History">
									<a data-toggle="tab" href="#tab_History" aria-expanded="expanded"> History </a>
								</li>
								<li class="tab active" id='tabSavedQuery' data="tab_Saved_Query">
									<a data-toggle="tab" href="#tab_Saved_Query" aria-expanded="expanded"> Saved Query </a>
								</li>
								<!--<li class="tab" id='tabClms' data="tab_Columns">
									<a data-toggle="tab" href="#tab_Columns" aria-expanded="expanded"> Tables Columns 
                                    </a>
								</li>-->
								<li class="tab" id='tabResCol' data="tab_ResultCol" ng-show="showResCol">
									<a data-toggle="tab" href="#tab_ResultCol" aria-expanded="expanded"> Results Columns 
                                    </a>
								</li>
								<li class="tab" id='tabExpn' data="tab_Explain" ng-show="showExpl">
									<a data-toggle="tab" href="#tab_Explain" aria-expanded="expanded"> Explain 
                                    </a>
								</li>
							</ul>
							<div class="tab-content">
								<div class="tab-pane fade tab_Result" ng-show="showResults">
									<div class="portlet box blue" ng-show="haveResData">
										<div class="portlet-title">
											<div class="actions">
												<a ng-click="export_csv()" class="btn btn-sm grey-mint">
													<i class="fa fa-file-excel-o"></i> Export as CSV </a>
											</div>
										</div>
										<div class="portlet-body">
											<table id="tblResult" class="display table table-striped table-bordered table-hover" cellspacing="0" width="100%">
											</table>											
										</div>										
									</div>
									<div ng-show="!haveResData">	
										<center>
											<h3>No Data to show</h3>
										</center>
									</div>
								</div>
								<div class="tab-pane fade tab_History" >
									<table id="tblHistory" class="display table table-striped table-bordered table-hover" cellspacing="0" width="100%">
										<thead>
											<tr>
												<th>Query</th>
												<th>Status</th>
												<th>Time</th>
												<th>Copy To Editor</th>
											</tr>
										</thead>
									</table>
									<div class="search-pagination" style="text-align: center;">
										<ul class="pagination">
											<li>
												<button ng-click="previous()" class="btn btn-primary previousBtn" ng-disabled="first" ><i class="fa fa-arrow-left"></i> {{'fastsearch.previous' | translate}} </button>
											</li>
											<li class="page-active">
												<button ng-click="next()" ng-init="start=0" class="btn btn-primary nextBtn" ng-disabled="last"><i class="fa fa-arrow-right"></i>{{'fastsearch.next' | translate}} </button>
											</li>

										</ul>
									</div>
								</div>
								<div class="tab-pane fade tab_Saved_Query active in" >
									<div >
										<table id="tblSavedQuery" class="display table table-striped table-bordered table-hover" cellspacing="0" width="100%">
											<thead>
												<tr>
													<th>Name</th>
													<th>Query</th>
													<th>Saved Time</th>
													<th>Copy To Editor</th>
												</tr>
											</thead>
										</table>
										<div class="search-pagination" style="text-align: center;">
											<ul class="pagination">
												<li>
													<button ng-click="svdprevious()" class="btn btn-primary previousBtn" ng-disabled = "firstsve"><i class="fa fa-arrow-left" ></i> {{'fastsearch.previous' | translate}} </button>
												</li>
												<li class="page-active">
													<button ng-click="svdnext()" ng-init="start=0" class="btn btn-primary nextBtn" ng-disabled="lastsve"><i class="fa fa-arrow-right" ></i>{{'fastsearch.next' | translate}} </button>
												</li>

											</ul>
										</div>
									</div>
								</div>
								<!--<div class="tab-pane fade tab_Columns">
									<table id="tblColumns" class="display table table-striped table-bordered table-hover" cellspacing="0" width="100%">
										<thead>
											<tr>
												<th>Number</th>
												<th>Name</th>
												<th>Type</th>
											</tr>
										</thead>
									</table>									
								</div>-->
								<div class="tab-pane fade tab_ResultCol" ng-show="showResCol">
									<table id="tblResultCol" class="display table table-striped table-bordered table-hover" cellspacing="0" width="100%">
										<thead>
											<tr>
												<th>Number</th>
												<th>Name</th>
												<th>Type</th>
											</tr>
										</thead>
									</table>
								</div>
								<div class="tab-pane fade tab_Explain col-md-10 col-sm-6 col-xs-12" ng-show="showExpl">
									<textarea type="text" ng-show="explainMsg.length>0" ng-model="explainMsg" readonly="true" cols="120" rows="15">

									</textarea>
									<center ng-show="!explainMsg.length>0">
										<h3>No Data to show</h3>
									</center>
								</div>
							</div>
							<!--<div ng-show="NoData">	
								<center>
									<h3>No Data to show</h3>
								</center>
							</div>-->
							<div class="clearfix margin-bottom-20"> </div>
							<div id="messageView" style="margin-top:20px">
								<div class="alert display-hide" id="result.errorinfo">
									<button class="close" data-close="alert"></button>
									<span>Hello im here</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="clearfix">
</div>
<div class="modal fade" id="mdlSaveQry" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
	<div class="modal-dialog" role="document" style="width: 50%">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="mdlSaveQryHeader"> Save Query </h4>
			</div>
			<div class="modal-body">
				<div class="alert alert-danger display-hide" id="mdlSaveQryRequire">
					<button class="close" data-close="alert"></button>
					<span></span>
				</div>
				<form id="SaveQryForm" name="SaveQryForm" autocomplete="off">
					<div class="form-group">
						<label for="savequery-name" class="control-label">Query Name :</label>
						<input type="text" class="form-control" id="savequery-name">
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-success" id="btnSaveQry"><i class="fa fa-check"></i> Save </button>
				<button type="button" class="btn btn-danger" id='btncancl' data-dismiss="modal"><i class="fa fa-times"></i> Cancel </button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="mdlSaveReport" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
	<div class="modal-dialog" role="document" style="width: 80%">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="mdlSaveQryHeader">E-Reporting </h4>
			</div>
			<div class="modal-body">
				<div class="alert alert-danger display-hide" id="mdlSaveQryRequire">
					<button class="close" data-close="alert"></button>
					<span></span>
				</div>
				  <ereport query="active_query" report="active_report" close="closeSaveModal()"></ereport>
				
		</div>
	</div>
</div>



<div class="modal fade" id="mdlReport" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
	<div class="modal-dialog" role="document" style="width: 90%">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<div class="caption">
                                            <i class="icon-settings"></i>
                                            <span class="caption-subject bold uppercase"> Report Editor</span>
                                        </div>
			</div>
			<div class="modal-body" id="report-body">
				<div class="alert alert-danger display-hide" id="mdlSaveQryRequire">
					<button class="close" data-close="alert"></button>
					<span></span>
				</div>
				<div class="row">
					<div class="col-md-3 form">
						<div class="form-body">
	                                                <div class="form-group form-md-line-input has-info">
	                                                    <input type="text" class="form-control" id="form_control_1" ng-model="reportTitle" placeholder="Enter your name">
	                                                    <label for="form_control_1">Title</label>
	                                                    <span class="help-block">Enter Report Title</span>
	                                                </div>
	                                                <div class="form-group form-md-line-input has-info">
	                                                    <select class="form-control" id="form_control_1" ng-model="selectedStyle">
	                                                        <option  value="jim1">JIM 1</option>
	                                                        <option  value="jim2">JIM 2</option>
	                                                    </select>
	                                                    <label for="form_control_1">Template Style</label>
	                                                   
	                                                </div>
	                                               <button type="button" class="btn btn-info" ng-click="update_report()"><i class="fa fa-refresh"></i> Update </button>
	                                                <button type="button" class="btn btn-info" ng-click="export_jxrml()"><i class="fa fa-download"></i> Generate iReport File(JXRML) </button>
						</div>
					</div>
					<div class="col-md-9 bordered">
						<div ng-bind-html="reportHtml"></div>

					</div>
				</div>
				<div class="clearfix"></div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-danger" id='btncancl' data-dismiss="modal"><i class="fa fa-close"></i> Close </button>
			</div>
		</div>
	</div>
</div>
<!--<div class="tblColLst" style="padding-top: 5px; padding-left: 30px;" >
	<ul class="lstcol">
		<li ng-repeat="x in ColResult" style="list-style-type: none;">
			<div><i class="fa fa-columns" aria-hidden="true"></i> {{x.column}} ({{x.type}})</div>
		</li>
	</ul>
</div>-->
<!-- <div class="modal fade" id="mdlSaveQry" tabindex="-1" role="dialog" aria-labelledby="mdlSaveQry">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
               <div class="row">
                    <div class="form-group col-md-5">
                        <label for="roleMgt-name" class="control-label">Query Name : </label>
                        <input type="text" class="form-control col-sm-5" id="saveqry-name">
                    </div> 
                </div>
            </div>
            <div class="modal-footer" style="text-align: center;">
                <button type="button" class="btn btn-success" id="btnSaveQry"><i class="fa fa-check"></i> Save </button>
                <button type="button" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-times"></i> Cancel </button>
            </div>
        </div>
    </div>
</div> -->
<style type="text/css">
	/*#tblHistory tbody tr td:first-child {
    cursor: pointer;
    cursor: hand;
}*/
</style>